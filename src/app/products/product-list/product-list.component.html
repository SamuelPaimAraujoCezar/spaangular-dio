<spa-header icon="view_list" title="Listagem de Produtos"></spa-header>

<mat-card class="filter-card">
  <form autocomplete="off" novalidate [formGroup]="filterList">
      <div class="filter-query">
          <div>
              <spa-input-text titulo="Pesquise aqui" controlName="query" [formGroup]="filterList">
              </spa-input-text>
          </div>
      </div>
      <div class="filter-size">
          <div>
              <spa-input-select titulo="Tamanho da página" controlName="pageSize" [opcoes]="pageSizes" [formGroup]="filterList">
              </spa-input-select>
          </div>
      </div>
  </form>
</mat-card>

<div class="mat-elevation-z4" *ngIf="products.length; else semProduto">
    <table class="products-table" mat-table [dataSource]="products">

    <ng-container matColumnDef="nome">
        <th mat-header-cell *matHeaderCellDef>Nome</th>
        <td mat-cell *matCellDef="let row">{{ row.nome }}</td>
      </ng-container>


      <ng-container matColumnDef="empresa">
        <th mat-header-cell *matHeaderCellDef>Empresa</th>
        <td mat-cell *matCellDef="let row">{{ row.empresa }}</td>
      </ng-container>


      <ng-container matColumnDef="categoria">
        <th mat-header-cell *matHeaderCellDef>Categoria</th>
        <td mat-cell *matCellDef="let row">{{ row.categoria }}</td>
      </ng-container>


      <ng-container matColumnDef="precoCompra">
        <th mat-header-cell *matHeaderCellDef>Preço Compra</th>
        <td mat-cell *matCellDef="let row">{{ row.precoCompra | currency: 'BRL' }}</td>
      </ng-container>


      <ng-container matColumnDef="precoVenda">
        <th mat-header-cell *matHeaderCellDef>Preço Venda</th>
        <td mat-cell *matCellDef="let row">{{ row.precoVenda | currency: 'BRL' }}</td>
      </ng-container>


      <ng-container matColumnDef="qtdEstoque">
        <th mat-header-cell *matHeaderCellDef>Qtd. Estoque</th>
        <td mat-cell *matCellDef="let row">{{ row.qtdEstoque }}</td>
      </ng-container>


      <ng-container matColumnDef="dataVencimento">
        <th mat-header-cell *matHeaderCellDef>Data Vencimento</th>
        <td mat-cell *matCellDef="let row">{{ row.dataVencimento | date: 'dd/MM/yyyy' }}</td>
      </ng-container>


       <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Ações</th>
        <td mat-cell *matCellDef="let row">
            <a (click)="edit(row.id)" class="edit">
                <mat-icon>
                    edit
                </mat-icon>
            </a>
            <a (click)="info(row.id)" class="info">
              <mat-icon>
                  info
              </mat-icon>
            </a>
            <a (click)="delete(row)" class="delete">
                <mat-icon>
                    delete
                </mat-icon>
            </a>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>

<ng-template #semProduto>
  <h1 class="full-width center">Nenhum produto encontrado!</h1>
</ng-template>

<div class="list-actions">
  <div>
    <a *ngIf="config.page !== 1" (click)="loadPage(-1)">
      <mat-icon>
        keyboard_arrow_left
      </mat-icon>
      <span>Previous</span>
    </a>
  </div>
  <div>
    <a  *ngIf="products.length === config.limit && (fullList.length / config.limit) > config.page" 
        (click)="loadPage(1)">
        <span>Next</span>
        <mat-icon>
          keyboard_arrow_right
        </mat-icon>
    </a>
  </div>
</div>

<div class="center">
  <a [routerLink]="['/products']">
    <mat-icon>
        home
    </mat-icon>
  </a>
</div>
